#!INSTANCE EntityAttributes (semantix.lib.datasources.sql.Sql)

cache: memory

params:
    entity_id:
        type: int
        default:
    concept:
        type: str

filters:
    - format: dict

source: |
    SELECT
            ca.name AS name,
            ea.value AS value
        FROM
            concept_attribute ca
            INNER JOIN concept c ON c.id = ca.concept_id
            LEFT JOIN entity_attribute ea ON ca.id = ea.concept_attribute_id AND ea.entity_id = %(entity_id)s
        WHERE
            c.name = %(concept)s
