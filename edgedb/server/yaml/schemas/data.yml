##
# Copyright (c) 2008-2010 Sprymix Inc.
# All rights reserved.
#
# See LICENSE for details.
##


%SCHEMA semantix.utils.lang.yaml.schema.Schema
%NAME Data
---
type: map
object: semantix.caos.backends.yaml.DataSet
mapping:
    =:
        type: map
        type: seq
        required: yes
        sequence:
            - &CONCEPT_DATA
              type: map
              object: semantix.caos.backends.yaml.EntityShell
              max-length: 1
              min-length: 1
              mapping:
                =:
                    type: map
                    mapping:
                        =: # Link Name
                            type: choice
                            required: yes
                            choice:
                                - type: seq
                                  sequence:
                                    - type: choice
                                      choice:
                                        - &ENTITY_SPEC
                                          type: choice
                                          choice:
                                            - type: map
                                              max-length: 1
                                              min-length: 1
                                              object: semantix.caos.backends.yaml.EntityShell
                                              mapping:
                                                "query":
                                                    type: str

                                            - *CONCEPT_DATA
                                            - type: str
                                              object: semantix.caos.backends.yaml.EntityShell
                                        - type: map
                                          mapping:
                                            "target":
                                               *ENTITY_SPEC
                                            "properties":
                                               type: map
                                               mapping:
                                                   =: # Property Name
                                                       type: scalar
                                - type: scalar
