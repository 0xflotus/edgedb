ConceptLinks:
    !!python/object/apply:semantix.datasources.sql.Sql
      - cache: memory

        params:
            source_concept:
                type: str
                default: !!null
            target_concept:
                type: str
                default: !!null
            link_type:
                type: str
                default: !!null

        filters:
            - format: dict

        source: |
            SELECT
                    cm.id,
                    cm.source_id,
                    sc.name AS source_concept,
                    cm.target_id,
                    tc.name AS target_concept,
                    cm.link_type AS link_type,
                    cm.mapping,
                    cm.required
                FROM
                    caos.concept_map cm
                    INNER JOIN caos.concept sc ON cm.source_id = sc.id
                    INNER JOIN caos.concept tc ON cm.target_id = tc.id
                WHERE
                    (%(source_concept)s IS NULL OR %(source_concept)s = sc.name)
                    AND (%(target_concept)s IS NULL OR %(target_concept)s = tc.name)
                    AND (%(link_type)s IS NULL OR %(link_type)s = cm.link_type)
