##
# Copyright (c) 2008-2010 Sprymix Inc.
# All rights reserved.
#
# See LICENSE for details.
##


%SCHEMA semantix.caos.datasources.schemas.Sql
%NAME TypesList
---
params:
    schema_name:
        type: str
        default: null
    type_name:
        type: str
        default: null

filters:
    - format: dict

source: |
        SELECT
                tp.oid                                AS oid,
                tp.typname                            AS name
            FROM
                pg_type AS tp
                INNER JOIN pg_namespace AS ns ON ns.oid = tp.typnamespace
            WHERE
                (%(schema_name)s::text IS NULL OR ns.nspname LIKE %(schema_name)s)
                AND (%(type_name)s::text IS NULL OR tp.typname LIKE %(type_name)s)
