##
# Copyright (c) 2008-2010, 2012 MagicStack Inc.
# All rights reserved.
#
# See LICENSE for details.
##


%SCHEMA metamagic.caos.datasources.schemas.Sql
%NAME ConceptList
---
params:
    name:
        type: str
        default: null

filters:
    - format: dict

source: |
    SELECT
            c.id AS id,
            c.name AS name,
            c.title AS title,
            c.description AS description,
            c.is_abstract AS is_abstract,
            c.is_final AS is_final,
            c.is_virtual AS is_virtual
        FROM
            caos.concept c
        WHERE
            %(name)s::text IS NULL OR c.name = %(name)s::text
